<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="SV_Fragment :: head"/>
<head>
    <meta charset="UTF-8">
    <title>Trang Lớp Học</title>
</head>
<head th:replace="SV_Fragment :: style-head"/>
<body>
<!-- Start Left menu area -->
<div th:replace="SV_Fragment :: frag_menu_left"/>
<!-- Content area -->
<div class="all-content-wrapper">
    <!--    Logo header mobile -->
    <div th:replace="SV_Fragment ::frag_icon_mobile"/>
    <!--    Header area -->
    <div th:replace="SV_Fragment :: frag_header"/>
    <!-- Single pro tab review Start-->
    <div class="single-pro-review-area mt-t-30 mg-b-15">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="basic-login-inner inline-basic-form">
                        <form action="#">
                            <div class="form-group-inner">
                                <div class="row">
                                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                                        <label class="login2 pull-right pull-right-pro">Chọn Học Kỳ</label>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12">
                                        <div class="form-select-list">
                                            <form th:action="@{/hoc-phan/dang-ky-hoc-phan}" method="get">
                                                <select class="form-control custom-select-value" th:name="maHK"
                                                        th:onchange="this.form.submit()">
                                                    <option value="">Chọn đợt đăng ký</option>
                                                        <option th:each="hk: ${HKLHP}"
                                                                th:value="${hk.hocKy.maHK}"
                                                                th:text="'Học kỳ ' + ${hk.getHocKy().getThuTuHocKy()} + ' (' + ${hk.getHocKy().getNamBatDau()} + ' - ' + ${hk.getHocKy().getNamKetThuc()} + ')'"
                                                                th:selected="${maHK == hk.getHocKy().getMaHK()}">
                                                        </option>
                                                </select>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="sparkline13-list">
                        <div class="sparkline13-hd">
                            <div class="main-sparkline13-hd">
                                <h1>Môn học/học phần đang chờ đăng ký</h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <table class="table table-bordered" width="100%">
                        <thead>
                        <tr class="active">
                            <th style="min-width: 20px">STT</th>
                            <th style="min-width: 150px; text-align: center">Mã lớp học phần</th>
                            <th style="min-width: 200px; text-align: center">Tên môn học/học phần</th>
                            <th>Số Tín Chỉ</th>
                            <th>Bắt Buộc</th>
                            <th>học phần: học trước (a),
                                tiên quyết (b),
                                song hành (c)
                            </th>
                            <th>Đăng Ký</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="lhp, status : ${danhsachLHP}">
                            <td style="min-widtd: 20px" th:text="${status.index + 1}"></td>
                            <td style="min-widtd: 150px; text-align: center" th:text="${lhp.hocPhan.getMaHocPhan()}"></td>
                            <td style="min-widtd: 200px; text-align: center" th:text="${lhp.tenLHP}"></td>
                            <td th:text="${lhp.hocPhan.soTCLT}+${lhp.hocPhan.soTCTH}"></td>
                            <td th:if="${lhp.hocPhan.hocPhanBatBuoc == true}">
                                <i class="fa fa-check-circle"></i>
                            </td>
                            <td th:if="${lhp.hocPhan.hocPhanBatBuoc == false}">
                                <i class="fa fa-times-circle"></i>
                            </td>
                            <td>001496 (a)</td>
                            <td>
                                <button type="button" class="btn btn-custon-two btn-success"
                                        th:onclick="xemLopHocPhan([[${lhp.hocPhan.maHocPhan}]])">Đăng Ký</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <script>
                        function xemLopHocPhan(id){
                            console.log(id+'')
                            $.ajax({
                                url: "/SinhVienDangKy/ChiTietLopHocPhanChoDangKy",
                                type: 'POST',
                                data: {
                                    param: {
                                        GuidIDLopHocPhan: id
                                    }
                                },
                                dataType: 'html',
                                beforeSend: function () {
                                    loadingMark();
                                },
                                success: function (data) {
                                    removeLoadingMark();
                                    $('#box_chitietlophocphan_chodangky').html('');
                                    var jsonResult = null;
                                    try {
                                        jsonResult = JSON.parse(data);
                                    } catch (exxx) { }

                                    if (jsonResult != null && jsonResult != undefined && jsonResult.Message != "" && jsonResult.ExceptionMessage != "" && jsonResult.Message != undefined && jsonResult.ExceptionMessage != undefined) {
                                        showPopUpMessage(jsonResult.ExceptionMessage);
                                    } else {
                                        $('#box_chitietlophocphan_chodangky').html(data);
                                    }

                                }
                            });

                            function removeLoadingMark() {
                                $('.k-loading-mask').remove();
                            }

                            function loadingMark() {
                                var html = '<div class="k-loading-mask" style="width: 100%;height: 100%;top: 0px;left: 0px;z-index: 999;display: block;background-color: #607d8b2b;position: fixed;bottom: 0px;"><i class="fa fa-spinner fa-pulse fa-3x fa-fw" style="position:absolute;left:45%;color:#4287f5;margin-top:20%;font-size:150px;"></i></div>';
                                $(html).appendTo(document.body);
                            }
                        }
                    </script>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="sparkline13-list">
                                <div class="sparkline13-hd">
                                    <div class="main-sparkline13-hd">
                                        <h1>Lớp học phần chờ đăng ký</h1>
                                        <div class="i-checks pull-left">
                                            <label>
                                                <input type="checkbox" value="" checked=""> HIỂN THỊ LỚP HỌC PHẦN KHÔNG
                                                TRÙNG
                                                LỊCH</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <table class="table table-bordered" width="100%">
                                <thead>
                                <tr class="active">
                                    <th>STT</th>
                                    <th>Thông tin lớp học phần</th>
                                    <th>Đã đăng ký</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>4220001459</td>
                                    <td>Anh văn 1</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>4220001459</td>
                                    <td>Anh văn 1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="sparkline13-list">
                                <div class="sparkline13-hd">
                                    <div class="main-sparkline13-hd">
                                        <h1>Chi tiết lớp học phần</h1>
                                        <input type="button" class="btn btn-custon-four btn-warning" value="Xem học phần trùng">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <table class="table table-bordered" width="100%">
                                <thead>
                                <tr class="active">
                                    <th>Mã lớp học phần</th>
                                    <th>Tên môn học/học phần</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>3</td>
                                    <td>001496 (a)</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>001496 (a)</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="sparkline13-list">
                        <div class="sparkline13-hd">
                            <div class="main-sparkline13-hd">
                                <h1>Lớp học phần đã đăng ký trong học kỳ này</h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <table class="table table-bordered" width="100%">
                        <thead>
                        <tr class="active">
                            <th>STT</th>
                            <th>Mã lớp học phần</th>
                            <th>Tên môn học/học phần</th>
                            <th>Lớp học dự kiến</th>
                            <th>TC</th>
                            <th>Nhóm TH</th>
                            <th>Học phí</th>
                            <th>Trạng thái ĐK</th>
                            <th>Ngày ĐK</th>
                            <th>Trạng thái Lớp học phần</th>
                            <th colspan="2">Hành Động</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>4220001459</td>
                            <td >Anh văn 1</td>
                            <td>DHKTPM14ATT</td>
                            <td>3</td>
                            <td>3</td>
                            <td>2.370.000</td>
                            <td>Đăng ký mới</td>
                            <td>13/07/2021</td>
                            <td>Đã khóa</td>
                            <td>
                                <input type="button" class="btn btn-custon-four btn-primary" value="Xem">
                            </td>
                            <td>
                                <input type="button" class="btn btn-custon-four btn-danger" value="Xoá">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--    Footer-->
    <div th:replace="SV_Fragment :: frag_footer"/>
</div>
<!-- Script-->
<div th:replace="SV_Fragment :: script"/>
<!-- c3 JS  -->
<script th:src="@{/js/c3-charts/d3.min.js}"></script>
<script th:src="@{/js/c3-charts/c3.min.js}"></script>
<script th:src="@{/js/c3-charts/c3-active.js}"></script>
<!-- tab JS  -->
<script th:src="@{/js/tab.js}"></script>
</body>
</html>